<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polyglot Translator - V2 (Node, Python, Go, C++)</title>
    <style>
        body { font-family: sans-serif; background-color: #f4f4f4; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 15px; }
        button:hover { background-color: #0056b3; }
        h3 { border-bottom: 2px solid #007bff; padding-bottom: 5px; }
        pre { background-color: #eee; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 0.9em; }
        .module { margin-bottom: 25px; border-left: 5px solid #007bff; padding-left: 15px; }
        .error { color: red; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåê Proyek Polyglot Lanjutan (Node.js, Python, Go, C++)</h1>
        <p>Aplikasi ini menunjukkan alur kerja di mana Node.js mengkoordinasikan tugas di berbagai bahasa pemrograman untuk satu kali eksekusi.</p>
        
        <button onclick="fetchPolyglotData()">Mulai Proses Lanjutan (Panggil Koordinator)</button>

        <div id="results">
            <p>Klik tombol untuk menjalankan rantai proses...</p>
        </div>
    </div>

    <script>
        async function fetchPolyglotData() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>Sedang menjalankan proses di 4 bahasa...</p>';

            try {
                // Panggil API baru
                const response = await fetch('http://localhost:3000/api/polyglot-process');
                const finalData = await response.json();

                if (finalData.error) {
                    resultsDiv.innerHTML = `<p class="error">Error Server: ${finalData.error}</p>`;
                    return;
                }

                const languages = finalData.languages;

                resultsDiv.innerHTML = `
                    <h2>‚úÖ Rantai Proses Selesai!</h2>

                    <div class="module">
                        <h3>1. Node.js (Koordinator - JS)</h3>
                        <p>Status: ${languages.nodejs.message}</p>
                        <p>Node.js berhasil memanggil dan mengumpulkan hasil dari 3 modul bahasa lain.</p>
                    </div>

                    <div class="module">
                        <h3>2. Python (Data Generator)</h3>
                        <p>Pesan: ${languages.python.message}</p>
                        <p>Python menghasilkan ${languages.python.original_count} entri data.</p>
                        <h4>Data Terurut (5 Teratas):</h4>
                        <pre>${JSON.stringify(languages.python.sorted_data.slice(0, 5), null, 2)}</pre>
                    </div>

                    <div class="module">
                        <h3>3. C++ (Low-Level Sorting Demo)</h3>
                        <p>Pesan: ${languages.cpp.error ? `<span class="error">${languages.cpp.error}</span>` : languages.cpp.message}</p>
                        ${languages.cpp.top_score ? `<p>C++ Mensimulasikan Sorting Data. Top Score: ${languages.cpp.top_score}</p>` : ''}
                    </div>
                    
                    <div class="module">
                        <h3>4. Go (Hashing Utility)</h3>
                        <p>Status: ${languages.go.error ? `<span class="error">${languages.go.error}</span>` : 'Go berhasil dieksekusi!'}</p>
                        ${languages.go.hash_sha256 ? `<h4>SHA-256 Checksum Data Python:</h4><pre>${languages.go.hash_sha256}</pre>` : ''}
                    </div>
                `;

            } catch (error) {
                resultsDiv.innerHTML = `<p class="error">Gagal terhubung ke server Node.js. Pastikan Anda telah menjalankan <code>npm start</code>.</p>`;
            }
        }
    </script>
</body>
</html>
